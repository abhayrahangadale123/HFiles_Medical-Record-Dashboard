{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///E:/C_Sharp/Frontend/my-app/app/compontes/Deshbord.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useRef, useState } from 'react';\r\nimport Image from 'next/image';\r\nimport { useRouter } from 'next/navigation';\r\nimport { Upload, FileText, Trash2, Eye, Loader2, X } from 'lucide-react';\r\nimport toast from 'react-hot-toast';\r\n\r\n \r\n\r\ninterface User {\r\n    id: number;\r\n    fullName: string;\r\n    email: string;\r\n    phone?: string;\r\n    gender?: string;\r\n    profileImageUrl?: string;\r\n}\r\n\r\ninterface FileRecord {\r\n    id: number;\r\n    fileName: string;\r\n    fileType: string;\r\n    storedFileName: string;\r\n    contentType: string;\r\n    size: number;\r\n    isDeleted?: boolean;\r\n}\r\n\r\nexport default function DashboardPage() {\r\n    const router = useRouter();\r\n\r\n    // --- CONFIG: change if your API is different ---\r\n    const API_FILES = 'https://localhost:7192/api/File'; // <-- ensure this matches your backend\r\n    const API_USERS = 'https://localhost:7192/api/users';\r\n\r\n    \r\n    const getAuthToken = (): string | null => {\r\n        console.log(\"Abhay\", localStorage.getItem('authToken'));\r\n        try { return localStorage.getItem('authToken'); } catch { return null; }\r\n    };\r\n    const getUserFromStorage = (): { id: number; fullName: string; email: string } | null => {\r\n        try {\r\n            const raw = localStorage.getItem('user');\r\n            return raw ? JSON.parse(raw) : null;\r\n        } catch { return null; }\r\n    };\r\n    const logoutLocal = () => {\r\n        localStorage.removeItem('authToken');\r\n        localStorage.removeItem('user');\r\n        router.push('/Login');\r\n    };\r\n\r\n    // --- state ---\r\n    const [userId, setUserId] = useState<number | null>(null);\r\n    const [user, setUser] = useState<User | null>(null);\r\n    const [editing, setEditing] = useState(false);\r\n    const [profileForm, setProfileForm] = useState({ fullName: '', email: '', phone: '', gender: '' });\r\n\r\n    const [files, setFiles] = useState<FileRecord[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [uploading, setUploading] = useState(false);\r\n\r\n    const [selectedFile, setSelectedFile] = useState<File | null>(null);\r\n    const [fileName, setFileName] = useState('');\r\n    const [fileType, setFileType] = useState('');\r\n\r\n    const fileInputRef = useRef<HTMLInputElement | null>(null);\r\n\r\n    // --- safe image fallback ---\r\n    const safeImage = (url?: string) => {\r\n        if (url && typeof url === 'string' && url.trim() !== '' && (url.startsWith('http') || url.startsWith('/'))) return url;\r\n        return 'https://via.placeholder.com/150?text=User';\r\n    };\r\n\r\n    // --- init from localStorage ---\r\n    useEffect(() => {\r\n        const u = getUserFromStorage();\r\n        if (!u) {\r\n            // not logged in\r\n            router.push('/login');\r\n            return;\r\n        }\r\n        setUserId(u.id);\r\n        setUser(u as User);\r\n        setProfileForm({ fullName: u.fullName || '', email: u.email || '', phone: '', gender: '' });\r\n    }, [router]);\r\n\r\n    // --- fetch only when userId known ---\r\n    useEffect(() => {\r\n        if (userId) {\r\n            fetchUser();\r\n            fetchFiles();\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [userId]);\r\n\r\n    // --- Fetch user details from backend (optional) ---\r\n    const fetchUser = async () => {\r\n        if (!userId) return;\r\n        try {\r\n            const token = getAuthToken();\r\n            const res = await fetch(`${API_USERS}/${userId}`, {\r\n                headers: token ? { Authorization: `Bearer ${token}` } : undefined,\r\n                credentials: 'include',\r\n            });\r\n            if (res.ok) {\r\n                const data = await res.json();\r\n                setUser(data);\r\n                setProfileForm({\r\n                    fullName: data.fullName || '',\r\n                    email: data.email || '',\r\n                    phone: data.phone || '',\r\n                    gender: data.gender || '',\r\n                });\r\n            } else {\r\n                // if 401/403, clear and redirect\r\n                if (res.status === 401 || res.status === 403) {\r\n                    logoutLocal();\r\n                } else {\r\n                    console.error('fetchUser failed', res.status);\r\n                }\r\n            }\r\n        } catch (err) {\r\n            console.error('User fetch failed', err);\r\n        }\r\n    };\r\n\r\n    // --- Fetch files ---\r\n    const fetchFiles = async () => {\r\n        if (!userId) return;\r\n        try {\r\n            setLoading(true);\r\n            const token = getAuthToken();\r\n            const res = await fetch(`${API_FILES}/user/${userId}`, {\r\n                headers: token ? { Authorization: `Bearer ${token}` } : undefined,\r\n                credentials: 'include',\r\n            });\r\n            if (res.ok) {\r\n                const data = await res.json();\r\n                setFiles(Array.isArray(data) ? (data as any[]).filter(f => !f.isDeleted) : []);\r\n            } else {\r\n                const txt = await res.text();\r\n                console.error('fetchFiles failed', res.status, txt);\r\n                toast.error('Failed to load files');\r\n            }\r\n        } catch (err) {\r\n            console.error('fetchFiles error', err);\r\n            toast.error('Failed to load files');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    \r\n\r\n    const handleUpload = async () => {\r\n        // use existing state variable instead of undefined function\r\n        const localUserId = userId;\r\n        if (!localUserId || localUserId === 0) {\r\n            return toast.error('User not logged in');\r\n        }\r\n\r\n        // -------- FILE VALIDATION --------\r\n        if (!selectedFile || !fileName.trim() || !fileType)\r\n            return toast.error('Fill all fields before uploading');\r\n\r\n        // -------- TOKEN CHECK --------\r\n        const token = getAuthToken();\r\n        if (!token) {\r\n            toast.error('Token missing! Login again');\r\n            logoutLocal();\r\n            return;\r\n        }\r\n\r\n        // -------- FORM DATA --------\r\n        const formData = new FormData();\r\n        formData.append('file', selectedFile);\r\n\r\n        try {\r\n            setUploading(true);\r\n\r\n            // ---- Upload URL with userId ----\r\n            const uploadUrl = `https://localhost:7192/api/File/upload?userId=${userId}`;\r\n\r\n            const res = await fetch(uploadUrl, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`  // DO NOT add Content-Type\r\n                },\r\n                body: formData,\r\n                credentials: 'include'\r\n            });\r\n\r\n            // -------- SUCCESS RESPONSE --------\r\n            if (res.ok) {\r\n                toast.success('File uploaded successfully!');\r\n                setSelectedFile(null);\r\n                setFileName('');\r\n                setFileType('');\r\n\r\n                if (fileInputRef.current)\r\n                    fileInputRef.current.value = '';\r\n\r\n                fetchFiles();\r\n                return;\r\n            }\r\n\r\n            // -------- ERROR RESPONSE --------\r\n            const text = await res.text();\r\n            toast.error('Upload failed: ' + text);\r\n\r\n        } catch (err) {\r\n            console.error('Upload error:', err);\r\n            toast.error('Network error');\r\n\r\n        } finally {\r\n            setUploading(false);\r\n        }\r\n    };\r\n\r\n    // --- Delete (soft) ---\r\n    const handleDelete = async (fileId: number) => {\r\n        if (!confirm('Delete this file?')) return;\r\n        try {\r\n            const token = getAuthToken();\r\n            const res = await fetch(`${API_FILES}/${fileId}`, {\r\n                method: 'DELETE',\r\n                headers: token ? { Authorization: `Bearer ${token}` } : undefined,\r\n                credentials: 'include',\r\n            });\r\n            if (res.ok) {\r\n                toast.success('File deleted');\r\n                setFiles(prev => prev.filter(f => f.id !== fileId));\r\n            } else {\r\n                const t = await res.text();\r\n                console.error('Delete failed', res.status, t);\r\n                toast.error('Delete failed');\r\n            }\r\n        } catch (err) {\r\n            console.error('Delete error', err);\r\n            toast.error('Delete failed');\r\n        }\r\n    };\r\n\r\n    // --- View file (open in new tab) ---\r\n    const handleView = (storedFileName: string) => {\r\n        // Ensure this matches your static file serving path\r\n        window.open(`https://localhost:7192/uploads/${userId}/${storedFileName}`, '_blank');\r\n    };\r\n\r\n    // --- Update profile (PUT) ---\r\n    const handleProfileSave = async () => {\r\n        if (!userId) return;\r\n        try {\r\n            const body = {\r\n                fullName: profileForm.fullName,\r\n                email: profileForm.email,\r\n                phone: profileForm.phone,\r\n                gender: profileForm.gender,\r\n            };\r\n            const token = getAuthToken();\r\n            const res = await fetch(`${API_USERS}/${userId}`, {\r\n                method: 'PUT',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    ...(token ? { Authorization: `Bearer ${token}` } : {}),\r\n                },\r\n                body: JSON.stringify(body),\r\n                credentials: 'include',\r\n            });\r\n            if (res.ok) {\r\n                toast.success('Profile updated');\r\n                setEditing(false);\r\n                fetchUser();\r\n                // update localStorage user copy\r\n                const updatedUser = { ...(user || {}), fullName: body.fullName, email: body.email, phone: body.phone, gender: body.gender };\r\n                setUser(updatedUser as User);\r\n                localStorage.setItem('user', JSON.stringify({ id: userId, fullName: updatedUser.fullName, email: updatedUser.email }));\r\n            } else {\r\n                const t = await res.text();\r\n                console.error('Profile update failed', res.status, t);\r\n                toast.error('Update failed');\r\n            }\r\n        } catch (err) {\r\n            console.error('Profile update error', err);\r\n            toast.error('Network error');\r\n        }\r\n    };\r\n\r\n    // --- loading spinner view ---\r\n    if (loading) {\r\n        return (\r\n            <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n                <Loader2 className=\"w-12 h-12 animate-spin text-blue-600\" />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // --- UI ---\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50\">\r\n            <header className=\"bg-blue-700 text-white py-4 shadow-lg\">\r\n                <div className=\"max-w-7xl-inline mx-auto px-6 flex items-center justify-between\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <div className=\"bg-white rounded-lg p-2\">\r\n                            <h1 className=\"text-2xl font-bold text-blue-700\">hfiles.</h1>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <span className=\"text-sm\">Welcome back, {user?.fullName || 'User'}!</span>\r\n                        <div className=\"w-10 h-10 rounded-full overflow-hidden border-2 border-white\">\r\n                            <Image\r\n                                src={safeImage(user?.profileImageUrl)}\r\n                                alt=\"Profile\"\r\n                                width={40}\r\n                                height={40}\r\n                                className=\"object-cover\"\r\n                                unoptimized\r\n                            />\r\n                        </div>\r\n                        <button onClick={logoutLocal} className=\"ml-4 px-3 py-1 bg-red-500 text-white rounded\">Logout</button>\r\n                    </div>\r\n                </div>\r\n            </header>\r\n\r\n            <div className=\"max-w-7xl mx-auto px-6 py-12\">\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-10\">\r\n\r\n                    {/* Profile */}\r\n                    <div className=\"lg:col-span-1\">\r\n                        <div className=\"bg-white rounded-2xl shadow-lg p-8 text-center\">\r\n                            <div className=\"w-32 h-32 mx-auto rounded-full overflow-hidden border-4 border-blue-100 mb-4\">\r\n                                <Image\r\n                                    src={safeImage(user?.profileImageUrl)}\r\n                                    alt=\"Profile\"\r\n                                    width={128}\r\n                                    height={128}\r\n                                    className=\"object-cover\"\r\n                                    unoptimized\r\n                                />\r\n                            </div>\r\n\r\n                            {!editing ? (\r\n                                <>\r\n                                    <h2 className=\"text-2xl font-bold\">{user?.fullName || 'User'}</h2>\r\n                                    <p className=\"text-gray-600\">{user?.email || 'email@example.com'}</p>\r\n                                    <p className=\"text-sm text-gray-500 mt-2\">{user?.phone}</p>\r\n\r\n                                    <div className=\"mt-4 flex justify-center gap-3\">\r\n                                        <button onClick={() => setEditing(true)} className=\"px-4 py-2 bg-yellow-400 rounded\">Edit</button>\r\n                                    </div>\r\n                                </>\r\n                            ) : (\r\n                                <>\r\n                                    <input\r\n                                        value={profileForm.fullName}\r\n                                        onChange={e => setProfileForm(p => ({ ...p, fullName: e.target.value }))}\r\n                                        placeholder=\"Full name\"\r\n                                        className=\"w-full px-4 py-2 border rounded mb-2\"\r\n                                    />\r\n                                    <input\r\n                                        value={profileForm.email}\r\n                                        onChange={e => setProfileForm(p => ({ ...p, email: e.target.value }))}\r\n                                        placeholder=\"Email\"\r\n                                        className=\"w-full px-4 py-2 border rounded mb-2\"\r\n                                    />\r\n                                    <input\r\n                                        value={profileForm.phone}\r\n                                        onChange={e => setProfileForm(p => ({ ...p, phone: e.target.value }))}\r\n                                        placeholder=\"Phone\"\r\n                                        className=\"w-full px-4 py-2 border rounded mb-2\"\r\n                                    />\r\n                                    <select\r\n                                        value={profileForm.gender}\r\n                                        onChange={e => setProfileForm(p => ({ ...p, gender: e.target.value }))}\r\n                                        className=\"w-full px-4 py-2 border rounded mb-4\"\r\n                                    >\r\n                                        <option value=\"\">Select gender</option>\r\n                                        <option>Male</option>\r\n                                        <option>Female</option>\r\n                                        <option>Other</option>\r\n                                    </select>\r\n\r\n                                    <div className=\"flex justify-center gap-3\">\r\n                                        <button onClick={handleProfileSave} className=\"px-4 py-2 bg-blue-600 text-white rounded\">Save</button>\r\n                                        <button onClick={() => setEditing(false)} className=\"px-4 py-2 border rounded\">Cancel</button>\r\n                                    </div>\r\n                                </>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Upload + Files */}\r\n                    <div className=\"lg:col-span-2 space-y-8\">\r\n\r\n                        {/* Upload */}\r\n                        <div className=\"bg-white rounded-2xl shadow-lg p-8\">\r\n                            <h2 className=\"text-xl font-bold mb-6 flex items-center gap-2\">\r\n                                <Upload className=\"w-6 h-6 text-blue-600\" />\r\n                                Upload Medical Record\r\n                            </h2>\r\n\r\n                            <div className=\"space-y-4\">\r\n                                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                                    <select value={fileType} onChange={e => setFileType(e.target.value)} className=\"px-4 py-3 border rounded-lg\">\r\n                                        <option value=\"\">Select Type</option>\r\n                                        <option>Lab Report</option>\r\n                                        <option>Prescription</option>\r\n                                        <option>X-Ray</option>\r\n                                        <option>Other</option>\r\n                                    </select>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={fileName}\r\n                                        onChange={e => setFileName(e.target.value)}\r\n                                        placeholder=\"File name (e.g. Blood Report Jan 2025)\"\r\n                                        className=\"px-4 py-3 border rounded-lg\"\r\n                                    />\r\n                                </div>\r\n\r\n                                <div className=\"flex items-center gap-4\">\r\n                                    <input ref={fileInputRef} id=\"fileInput\" type=\"file\" onChange={e => setSelectedFile(e.target.files?.[0] || null)} className=\"hidden\" />\r\n                                    <button\r\n                                        onClick={() => fileInputRef.current?.click()}\r\n                                        className=\"px-6 py-3 border-2 border-dashed rounded-lg hover:border-blue-500 flex items-center gap-2\"\r\n                                    >\r\n                                        <Upload className=\"w-5 h-5\" />\r\n                                        {selectedFile?.name || 'Choose File'}\r\n                                    </button>\r\n\r\n                                    {selectedFile && (\r\n                                        <button onClick={() => { setSelectedFile(null); setFileName(''); setFileType(''); if (fileInputRef.current) fileInputRef.current.value = ''; }} className=\"text-red-600\">\r\n                                            <X className=\"w-5 h-5\" />\r\n                                        </button>\r\n                                    )}\r\n\r\n                                    <button\r\n                                        onClick={handleUpload}\r\n                                        disabled={uploading || !selectedFile || !fileName || !fileType}\r\n                                        className=\"px-8 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2\"\r\n                                    >\r\n                                        {uploading ? <Loader2 className=\"w-5 h-5 animate-spin\" /> : 'Upload'}\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Files List */}\r\n                        <div className=\"bg-white rounded-2xl shadow-lg p-8\">\r\n                            <h3 className=\"text-lg font-semibold mb-6\">Your Medical Records</h3>\r\n                            {files.length === 0 ? (\r\n                                <p className=\"text-center text-gray-500 py-12\">No files uploaded yet</p>\r\n                            ) : (\r\n                                <div className=\"space-y-4\">\r\n                                    {files.map(file => (\r\n                                        <div key={file.id} className=\"flex items-center justify-between p-5 border rounded-xl hover:shadow transition\">\r\n                                            <div className=\"flex items-center gap-4\">\r\n                                                <div className=\"bg-gray-100 p-3 rounded-lg\">\r\n                                                    <FileText className=\"w-8 h-8 text-blue-600\" />\r\n                                                </div>\r\n                                                <div>\r\n                                                    <h4 className=\"font-semibold\">{file.fileName}</h4>\r\n                                                    <p className=\"text-sm text-gray-500\">\r\n                                                        {(file.size / 1024 / 1024).toFixed(2)} MB\r\n                                                    </p>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div className=\"flex gap-3\">\r\n                                                <button onClick={() => handleView(file.storedFileName)} className=\"px-4 py-2 bg-yellow-400 hover:bg-yellow-500 text-black rounded-lg text-sm flex items-center gap-2\">\r\n                                                    <Eye className=\"w-4 h-4\" /> View\r\n                                                </button>\r\n                                                <button onClick={() => handleDelete(file.id)} className=\"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm flex items-center gap-2\">\r\n                                                    <Trash2 className=\"w-4 h-4\" /> Delete\r\n                                                </button>\r\n                                            </div>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}